{"ast":null,"code":"var _jsxFileName = \"/Users/arnabdhar/Desktop/meetingbuddy/src/Pages/Home/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { Grid } from '@mui/material';\nimport React, { useState, useEffect } from 'react';\nimport { ReactMic } from 'react-mic';\nimport { HomeWrapper } from './styled';\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardContent from '@mui/material/CardContent';\nimport CardMedia from '@mui/material/CardMedia';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport ReactQuill from \"react-quill\";\nimport 'react-quill/dist/quill.snow.css';\nimport Loader from '../../Components/Loader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const [record, setRecord] = useState(false);\n  const [loader, setLoader] = useState(false);\n  const [blob, setBlob] = useState(null);\n  const [text, setText] = useState('');\n  const [newText, setNewText] = useState('In 2018, around 125 MPs had urged the President of India to enforce the two-child policy in India. In 2016, Prahlad Singh Patel, a BJP MP, had also tabled a private member bill on population control. It could not reach the stage of voting, like most such private bills.');\n  const [convertedText, setConvertedText] = useState('');\n  const [meetingStart, setMeetingStart] = useState(false);\n  useEffect(() => {\n    if (meetingStart) setNewText(newText + ' ' + text);\n  }, [text]);\n\n  const start = () => {\n    setMeetingStart(true);\n    setLoader(true);\n    navigator.mediaDevices.getUserMedia({\n      audio: true\n    }).then(stream => {\n      if (!MediaRecorder.isTypeSupported('audio/webm')) return alert('Not Supported');\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: 'audio/webm'\n      });\n      const socket = new WebSocket('wss://api.deepgram.com/v1/listen?punctuate=true&version=latest&profanity_filter=true&numerals=true', ['token', '1347b873378522f6f0bde96d191fb52655d81ca9']);\n\n      socket.onopen = () => {\n        setLoader(false);\n        mediaRecorder.addEventListener('dataavailable', event => {\n          socket.send(event.data);\n        });\n        mediaRecorder.start(100);\n      };\n\n      socket.onmessage = message => {\n        // console.log(message,'message');\n        const data = JSON.parse(message.data);\n        const transcript = data.channel.alternatives[0].transcript;\n\n        if (transcript && data.is_final) {\n          textFormatter(transcript);\n        }\n      };\n    });\n  };\n\n  const stop = () => {\n    setMeetingStart(false);\n  };\n\n  const textFormatter = newText => {\n    setText(newText);\n  };\n\n  const startRecording = () => {\n    setRecord(true);\n  };\n\n  const stopRecording = () => {\n    setRecord(false);\n  };\n\n  const onStop = async recordedBlob => {\n    console.log('recordedBlob is: ', recordedBlob); // const base64 =  await covertToBase64(recordedBlob.blob)\n    // console.log(recordedBlob.blob,'====base64');\n\n    var reader = new FileReader();\n    reader.readAsDataURL(recordedBlob.blob);\n\n    reader.onloadend = async () => {\n      let base64String = reader.result;\n      setBlob(base64String);\n      const rawResponse = await fetch('http://localhost:3800/submit', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        },\n        body: JSON.stringify({\n          a: base64String\n        })\n      });\n    };\n  };\n\n  const submitForSummary = async () => {\n    let url = 'https://d3df-35-238-80-252.ngrok.io?wholetext=' + newText;\n    const rawResponse = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    console.log(await rawResponse.json());\n  };\n\n  return /*#__PURE__*/_jsxDEV(HomeWrapper, {\n    container: true,\n    spacing: 2,\n    children: [loader && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(ReactMic, {\n      record: record,\n      className: \"sound-wave\",\n      onStop: onStop //   onData={onData}\n      ,\n      strokeColor: \"#000000\",\n      backgroundColor: \"#FF4081\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: startRecording,\n      type: \"button\",\n      children: \"Start\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: stopRecording,\n      type: \"button\",\n      children: \"Stop\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      md: 6,\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n          component: \"img\",\n          height: \"140\",\n          image: \"https://previews.123rf.com/images/katedav/katedav1409/katedav140900264/31993569-%E6%BC%AB%E7%94%BB%E4%BC%9A%E8%AD%B0%E3%81%BE%E3%81%9F%E3%81%AF%E4%BC%9A%E8%AD%B0%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%82%92%E3%83%A9%E3%82%A6%E3%83%B3%E3%83%89%E3%81%97%E3%81%BE%E3%81%99%E3%80%82.jpg\",\n          alt: \"green iguana\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            variant: \"h5\",\n            component: \"div\",\n            children: \"Record New Meeting\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"text.secondary\",\n            children: \"Are you going to have a new meeting? Lets record and make a summary to people.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n          children: [!meetingStart && /*#__PURE__*/_jsxDEV(Button, {\n            size: \"small\",\n            onClick: start,\n            children: \"Start Recording\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 39\n          }, this), meetingStart && /*#__PURE__*/_jsxDEV(Button, {\n            size: \"small\",\n            onClick: stop,\n            children: \"Stop Recording\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      md: 6,\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n          component: \"img\",\n          height: \"140\",\n          image: \"https://image.shutterstock.com/image-vector/stickman-illustration-featuring-group-teenage-260nw-683203834.jpg\",\n          alt: \"green iguana\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            variant: \"h5\",\n            component: \"div\",\n            children: \"MIssed a meeting?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"text.secondary\",\n            children: \"Let's give you some ideas what happened in last coupple of minutes. You will get some summary from it.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            size: \"small\",\n            children: \"Let's go\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      md: 12,\n      children: /*#__PURE__*/_jsxDEV(ReactQuill, {\n        theme: \"snow\",\n        value: newText,\n        onChange: setConvertedText,\n        style: {\n          minHeight: '300px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      md: 12,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        size: \"large\",\n        variant: \"contained\",\n        onClick: submitForSummary,\n        children: \"Get Summary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 12\n  }, this);\n};\n\n_s(Home, \"JcO81IsXL5/zenOpmvIO93jT/gg=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/arnabdhar/Desktop/meetingbuddy/src/Pages/Home/index.tsx"],"names":["Grid","React","useState","useEffect","ReactMic","HomeWrapper","Card","CardActions","CardContent","CardMedia","Button","Typography","ReactQuill","Loader","Home","record","setRecord","loader","setLoader","blob","setBlob","text","setText","newText","setNewText","convertedText","setConvertedText","meetingStart","setMeetingStart","start","navigator","mediaDevices","getUserMedia","audio","then","stream","MediaRecorder","isTypeSupported","alert","mediaRecorder","mimeType","socket","WebSocket","onopen","addEventListener","event","send","data","onmessage","message","JSON","parse","transcript","channel","alternatives","is_final","textFormatter","stop","startRecording","stopRecording","onStop","recordedBlob","console","log","reader","FileReader","readAsDataURL","onloadend","base64String","result","rawResponse","fetch","method","headers","body","stringify","a","submitForSummary","url","json","minHeight"],"mappings":"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","sourcesContent":["import { Grid } from '@mui/material';\nimport React,{useState,useEffect, useRef} from 'react';\nimport { ReactMic } from 'react-mic';\nimport {HomeWrapper} from './styled'\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardContent from '@mui/material/CardContent';\nimport CardMedia from '@mui/material/CardMedia';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport ReactQuill from \"react-quill\"\nimport 'react-quill/dist/quill.snow.css'\nimport Loader from '../../Components/Loader';\n\nconst Home:React.FC = () =>{\n    const [record,setRecord] = useState<boolean>(false)\n    const [loader,setLoader] = useState<boolean>(false)\n    const [blob,setBlob] = useState<any>(null)\n    const [text,setText] = useState<string>('')\n    const [newText, setNewText] = useState('In 2018, around 125 MPs had urged the President of India to enforce the two-child policy in India. In 2016, Prahlad Singh Patel, a BJP MP, had also tabled a private member bill on population control. It could not reach the stage of voting, like most such private bills.');\n    const [convertedText, setConvertedText] = useState('');\n    const [meetingStart, setMeetingStart] = useState<boolean>(false);\n\n    \n            \n    useEffect(()=>{\n        if(meetingStart) setNewText(newText+' '+text)\n    },[text])\n    const start = () =>{\n        setMeetingStart(true)\n        setLoader(true)\n        navigator.mediaDevices.getUserMedia({audio: true}).then(stream=>{\n            if(!MediaRecorder.isTypeSupported('audio/webm')) return alert('Not Supported')\n            const mediaRecorder = new MediaRecorder(stream,{mimeType:'audio/webm'})\n            const socket = new WebSocket('wss://api.deepgram.com/v1/listen?punctuate=true&version=latest&profanity_filter=true&numerals=true',['token','1347b873378522f6f0bde96d191fb52655d81ca9'])\n           \n            socket.onopen = () =>{\n                setLoader(false)\n                \n                mediaRecorder.addEventListener('dataavailable',event =>{\n                    socket.send(event.data)\n                })\n                mediaRecorder.start(100)\n            }\n            socket.onmessage = message =>{\n                // console.log(message,'message');\n                const data = JSON.parse(message.data)\n                const transcript = data.channel.alternatives[0].transcript\n                if(transcript && data.is_final){\n                    textFormatter(transcript)\n                }\n                \n            }\n            \n        })\n        \n    }\n    const stop = () =>{\n        setMeetingStart(false)\n    }\n    const textFormatter = (newText:string) =>{\n        setText(newText)\n    }\n\n    const startRecording = () => {\n        setRecord(true)\n    }\n     \n     const stopRecording = () => {\n        setRecord(false)\n    }\n    const onStop = async (recordedBlob:any) =>{\n        console.log('recordedBlob is: ', recordedBlob);\n        // const base64 =  await covertToBase64(recordedBlob.blob)\n        // console.log(recordedBlob.blob,'====base64');\n        var reader = new FileReader();\n        reader.readAsDataURL(recordedBlob.blob);\n        reader.onloadend = async  () =>{\n            let base64String = reader.result;\n            setBlob(base64String)\n            const rawResponse = await fetch('http://localhost:3800/submit', {\n                method: 'POST',\n                headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Access-Control-Allow-Origin':'*'\n                },\n                body:JSON.stringify({a:base64String})\n            });\n        }\n        \n    }\n    const submitForSummary = async() =>{\n        let url = 'https://d3df-35-238-80-252.ngrok.io?wholetext='+newText\n        const rawResponse = await fetch(url, {\n            method: 'POST',\n            \n            headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin':'*'\n            },\n        });\n        console.log(await rawResponse.json());\n        \n    }\n\n    return <HomeWrapper container spacing={2}>\n        {loader && <Loader />}\n        <ReactMic\n          record={record}\n          className=\"sound-wave\"\n          onStop={onStop}\n        //   onData={onData}\n          strokeColor=\"#000000\"\n          backgroundColor=\"#FF4081\" />\n        <button onClick={startRecording} type=\"button\">Start</button>\n        <button onClick={stopRecording} type=\"button\">Stop</button>\n        <Grid item md={6}>\n            <Card >\n                <CardMedia\n                    component=\"img\"\n                    height=\"140\"\n                    image=\"https://previews.123rf.com/images/katedav/katedav1409/katedav140900264/31993569-%E6%BC%AB%E7%94%BB%E4%BC%9A%E8%AD%B0%E3%81%BE%E3%81%9F%E3%81%AF%E4%BC%9A%E8%AD%B0%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%82%92%E3%83%A9%E3%82%A6%E3%83%B3%E3%83%89%E3%81%97%E3%81%BE%E3%81%99%E3%80%82.jpg\"\n                    alt=\"green iguana\"\n                />\n                <CardContent>\n                    <Typography gutterBottom variant=\"h5\" component=\"div\">\n                        Record New Meeting\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                        Are you going to have a new meeting? Lets record and make a summary to people.\n                    </Typography>\n                </CardContent>\n                <CardActions>\n                    {!meetingStart && <Button size=\"small\" onClick={start}>Start Recording</Button>}\n                    {meetingStart && <Button size=\"small\" onClick={stop}>Stop Recording</Button>}\n                </CardActions>\n            </Card>\n        </Grid>\n        <Grid item md={6}>\n            <Card >\n                <CardMedia\n                    component=\"img\"\n                    height=\"140\"\n                    image=\"https://image.shutterstock.com/image-vector/stickman-illustration-featuring-group-teenage-260nw-683203834.jpg\"\n                    alt=\"green iguana\"\n                />\n                <CardContent>\n                    <Typography gutterBottom variant=\"h5\" component=\"div\">\n                        MIssed a meeting?\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                        Let's give you some ideas what happened in last coupple of minutes. You will get some summary from it.\n                    </Typography>\n                </CardContent>\n                <CardActions>\n                    <Button size=\"small\">Let's go</Button>\n                </CardActions>\n            </Card>\n        </Grid>\n        <Grid item md={12}>\n        <ReactQuill\n            theme='snow'\n            value={newText}\n            onChange={setConvertedText}\n            style={{minHeight: '300px'}}\n        />    \n        </Grid>\n        <Grid item md={12}>\n            <Button size='large' variant='contained' onClick={submitForSummary}>Get Summary</Button> \n        </Grid>\n\n    </HomeWrapper>\n}\n\nexport default Home"]},"metadata":{},"sourceType":"module"}